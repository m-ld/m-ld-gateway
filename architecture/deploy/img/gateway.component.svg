<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="691px" preserveAspectRatio="none" style="width:912px;height:691px;background:#FFFFFF;" version="1.1" viewBox="0 0 912 691" width="912px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="208" x="345" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="198" x="350" y="23.5352">m-ld Gateway Components</text><!--MD5=[3cca84f111bad6deea36f310946c30e0]
cluster Node.js--><g id="cluster_Node.js"><polygon fill="none" points="140,53.4883,150,43.4883,756,43.4883,756,440.4883,746,450.4883,140,450.4883,140,53.4883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="746" x2="756" y1="53.4883" y2="43.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="140" x2="746" y1="53.4883" y2="53.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="746" x2="746" y1="53.4883" y2="450.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="53" x="417.5" y="70.0234">Node.js</text></g><!--MD5=[a96875dd8cb2e433dc952b8d34d153d3]
cluster gw--><g id="cluster_gw"><rect fill="none" height="319" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="552" x="172" y="99.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="61" x="417.5" y="115.0234">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="418" y="131.5117">Gateway</text></g><!--MD5=[f56f3099e9d7088e3ffbd2ca16089572]
entity gwClone--><g id="elem_gwClone"><rect fill="#F1F1F1" height="52.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="181" x="348.5" y="341.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="394.5" y="365.0234">«m-ld clone»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="358.5" y="381.5117">Gateway administration</text></g><g id="elem_GMN5"><path d="M375.5,193.4883 L375.5,249.4199 A0,0 0 0 0 375.5,249.4199 L448.8,249.4199 L442.01,341.3883 L456.8,249.4199 L536.5,249.4199 A0,0 0 0 0 536.5,249.4199 L536.5,203.4883 L526.5,193.4883 L375.5,193.4883 A0,0 0 0 0 375.5,193.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M526.5,193.4883 L526.5,203.4883 L536.5,203.4883 L526.5,193.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="381.5" y="211.0566">Contains accounts,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="381.5" y="226.3672">user keys and list</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="381.5" y="241.6777">of named subdomains</text></g><!--MD5=[de8dbb75c7c3abab9b49df715acaee46]
entity remotes--><g id="elem_remotes"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="564.5" y="349.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="574.5" y="373.5234">remotes service</text></g><!--MD5=[5118bb846d0e1633670bfab55c3e47b1]
entity bkClones--><g id="elem_bkClones"><rect fill="#F1F1F1" height="48.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="200.5" y="345.4883"/><rect fill="#F1F1F1" height="48.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="196.5" y="341.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="208.5" y="363.0234">«m-ld clone»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="204.5" y="379.5117">Backup clones</text></g><g id="elem_GMN10"><path d="M196,200.9883 L196,241.6094 A0,0 0 0 0 196,241.6094 L262.22,241.6094 L257.31,341.3583 L270.22,241.6094 L340,241.6094 A0,0 0 0 0 340,241.6094 L340,210.9883 L330,200.9883 L196,200.9883 A0,0 0 0 0 196,200.9883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M330,200.9883 L330,210.9883 L340,210.9883 L330,200.9883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="202" y="218.5566">Backup clones of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="202" y="233.8672">named subdomains</text></g><!--MD5=[7bfb5c9979dbc580354a85a06f11d78b]
entity adminApi--><g id="elem_adminApi"><ellipse cx="497" cy="542.4883" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="433" y="573.0234">Administration API</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="42" x="476" y="522.5352">«http»</text></g><!--MD5=[f7eaf12ebd1e97c51bf3c935b969d842]
entity cloneApi--><g id="elem_cloneApi"><ellipse cx="244" cy="542.4883" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="211" y="573.0234">Clone API</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="42" x="223" y="522.5352">«http»</text></g><!--MD5=[ba2d6ea9e5bacb242a298e7f1ffc729d]
entity gwWeb--><g id="elem_gwWeb"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="772" y="349.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="782" y="373.5234">Gateway Website</text></g><!--MD5=[107003500c5c42cbbef62457b4e1bbc7]
entity volume--><g id="elem_volume"><path d="M320,529.9883 C320,519.9883 355,519.9883 355,519.9883 C355,519.9883 390,519.9883 390,529.9883 L390,555.4766 C390,565.4766 355,565.4766 355,565.4766 C355,565.4766 320,565.4766 320,555.4766 L320,529.9883 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M320,529.9883 C320,539.9883 355,539.9883 355,539.9883 C355,539.9883 390,539.9883 390,529.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="330" y="557.5234">volume</text></g><g id="elem_apDomains"><ellipse cx="86.7817" cy="542.3062" fill="#F1F1F1" rx="80.7817" ry="26.318" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="47.7817" y="537.3531">Application</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="37.7817" y="553.8414">m-ld Domains</text></g><!--MD5=[cf5b1fb2a73a10a1f05a3c04a73bc607]
entity apClones--><g id="elem_apClones"><rect fill="#F1F1F1" height="48.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="312.5" y="636.4883"/><rect fill="#F1F1F1" height="48.9766" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="308.5" y="632.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="316.5" y="654.0234">«m-ld clone»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="323" y="670.5117">App clones</text></g><!--MD5=[fa5fd7dad7067f3ef10c4878408868c8]
link gwClone to adminApi--><g id="link_gwClone_adminApi"><path d="M447.72,394.6383 C454.39,414.2983 463.81,442.0983 472,466.4883 C480.13,490.6883 489.64,519.3183 494.24,533.1583 " fill="none" id="gwClone-adminApi" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b9366fb1f984044f0dae48be61f75953]
link bkClones to cloneApi--><g id="link_bkClones_cloneApi"><path d="M253.35,394.8083 C250.82,434.4783 246.11,508.3983 244.53,533.1583 " fill="none" id="bkClones-cloneApi" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c157a0968f16e7ae71e8f1ca3fd62651]
link gw to gwWeb--><g id="link_gw_gwWeb"><path d="M724.2089,232.126 C724.3036,232.2372 724.399,232.3493 724.4951,232.4622 C724.6873,232.688 724.8823,232.9171 725.0801,233.1494 C725.4756,233.6141 725.8822,234.0917 726.2994,234.5819 C727.1338,235.5621 728.0108,236.5925 728.9273,237.6692 C736.2597,246.2833 746.1219,257.8695 756.9437,270.5833 C778.5875,296.0108 804.07,325.9483 820.83,345.6383 " fill="none" id="gw-to-gwWeb" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="824.35,349.7783,821.5679,340.3305,821.1113,345.9689,815.4729,345.5124,824.35,349.7783" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40" x="789" y="300.5566">serves</text></g><!--MD5=[53b28f2b01454b1ad64b56d8d602b331]
link gwClone to volume--><g id="link_gwClone_volume"><path d="M426.42,394.8083 C410.63,427.2383 383.69,482.5683 367.8,515.2083 " fill="none" id="gwClone-to-volume" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="365.53,519.8583,373.0602,513.5103,367.7145,515.3607,365.8641,510.0151,365.53,519.8583" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="391" y="480.0566">persist</text></g><!--MD5=[8b0f224d84e8d524cb8faa546b46d0cd]
link bkClones to volume--><g id="link_bkClones_volume"><path d="M269.97,394.8083 C288.77,427.2383 320.85,482.5683 339.77,515.2083 " fill="none" id="bkClones-to-volume" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="342.46,519.8583,341.4226,510.0642,339.9593,515.5285,334.495,514.0653,342.46,519.8583" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="321" y="480.0566">persist</text></g><!--MD5=[fe300b803e9ee3e525a845cd9f0f2bc4]
link bkClones to apDomains--><g id="link_bkClones_apDomains"><path d="M229.85,394.8083 C197.72,427.7983 142.51,484.4983 110.96,516.8883 " fill="none" id="bkClones-apDomains" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[1131a7f252b73d77f09259a78111491d]
link apDomains to apClones--><g id="link_apDomains_apClones"><path d="M135.71,563.6983 C183.99,583.7283 257.83,614.3583 308.15,635.2383 " fill="none" id="apDomains-apClones" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[e549c2ba9b0a6abd892272ea2ee5a4b5]
link bkClones to remotes--><g id="link_bkClones_remotes"><path d="M275.12,337.0883 C289.51,317.9983 310.75,295.1683 336,284.4883 C351.14,278.0783 393.83,281.4983 410,284.4883 C474.98,296.5083 545.63,327.0883 588.36,347.7183 " fill="none" id="bkClones-remotes" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="592.92,349.9283,586.572,342.3981,588.4225,347.7438,583.0768,349.5942,592.92,349.9283" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="271.97,341.3483,280.5314,336.4797,274.9379,337.3244,274.0932,331.731,271.97,341.3483" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="337" y="293.0566">«socket.io»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="349.5" y="308.3672">pubsub</text></g><!--MD5=[fa5107fdb0ee1f1a6efbd3ecf218e682]
link apClones to remotes--><g id="link_apClones_remotes"><path d="M423.04,650.6583 C473.99,641.1983 545.14,619.7383 586,571.4883 C630.3,519.1783 631.88,432.2583 629.83,391.4483 " fill="none" id="apClones-remotes" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="629.53,386.2383,626.0515,395.4524,629.8161,391.2301,634.0384,394.9947,629.53,386.2383" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="417.86,651.5883,427.4256,653.9333,422.7812,650.7039,426.0106,646.0595,417.86,651.5883" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="618" y="540.0566">«socket.io»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="630.5" y="555.3672">pubsub</text></g><!--MD5=[f9aa0c34750ea7cd545dceeb8cfd73b3]
@startuml
'https://plantuml.com/component-diagram
skinparam componentStyle rectangle

title m-ld Gateway Components

node Node.js {
  component "Gateway" <<service>> as gw {
    component "Gateway administration" <<m-ld clone>> as gwClone
    note top of gwClone
      Contains accounts,
      user keys and list
      of named subdomains
    end note
    component "remotes service" as remotes
    collections "Backup clones" <<m-ld clone>> as bkClones
    note top of bkClones
      Backup clones of
      named subdomains
    end note
  }
}
interface "Administration API" <<http>> as adminApi
interface "Clone API" <<http>> as cloneApi
gwClone - - adminApi
bkClones - - cloneApi

component "Gateway Website" as gwWeb
gw - -> gwWeb : serves

database volume

gwClone - -> volume : persist
bkClones - -> volume : persist

collections (Application\nm-ld Domains) as apDomains #line.dashed
collections "App clones" <<m-ld clone>> as apClones

bkClones .. apDomains
apDomains .. apClones
bkClones <-> remotes : <<socket.io>>\npubsub
apClones <-> remotes : <<socket.io>>\npubsub
@enduml

@startuml
skinparam componentStyle rectangle

title m-ld Gateway Components

node Node.js {
  component "Gateway" <<service>> as gw {
    component "Gateway administration" <<m-ld clone>> as gwClone
    note top of gwClone
      Contains accounts,
      user keys and list
      of named subdomains
    end note
    component "remotes service" as remotes
    collections "Backup clones" <<m-ld clone>> as bkClones
    note top of bkClones
      Backup clones of
      named subdomains
    end note
  }
}
interface "Administration API" <<http>> as adminApi
interface "Clone API" <<http>> as cloneApi
gwClone - - adminApi
bkClones - - cloneApi

component "Gateway Website" as gwWeb
gw - -> gwWeb : serves

database volume

gwClone - -> volume : persist
bkClones - -> volume : persist

collections (Application\nm-ld Domains) as apDomains #line.dashed
collections "App clones" <<m-ld clone>> as apClones

bkClones .. apDomains
apDomains .. apClones
bkClones <-> remotes : <<socket.io>>\npubsub
apClones <-> remotes : <<socket.io>>\npubsub
@enduml

PlantUML version 1.2022.8(Sun Sep 25 10:00:33 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>