<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg"
     contentStyleType="text/css" height="717px" preserveAspectRatio="none"
     style="width:675px;height:717px;background:#FFFFFF;" version="1.1" viewBox="0 0 675 717"
     width="675px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="353" x="154.48" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="343" x="159.48" y="23.5352">App Service with Database and Sidecar Gateway</text><!--MD5=[8699c0c8e953ee53654a072cc875bfb4]
cluster Browser--><g id="cluster_Browser"><polygon fill="none" points="48.46,53.4883,58.46,43.4883,258.46,43.4883,258.46,546.4883,248.46,556.4883,48.46,556.4883,48.46,53.4883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="248.46" x2="258.46" y1="53.4883" y2="43.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="48.46" x2="248.46" y1="53.4883" y2="53.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="248.46" x2="248.46" y1="53.4883" y2="556.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="58" x="120.46" y="70.0234">Browser</text></g><!--MD5=[d3c595dc7835f149e458c44ed889a37a]
cluster page--><g id="cluster_page"><rect fill="none" height="285" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="162" x="72.46" y="91.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="34" x="136.46" y="107.0234">page</text></g><!--MD5=[84d204d48e0bf0e71c948c7acde494e4]
cluster App Service Tier--><g id="cluster_App Service Tier"><polygon fill="none" points="282.46,235.4883,292.46,225.4883,509.46,225.4883,509.46,573.4883,499.46,583.4883,282.46,583.4883,282.46,235.4883" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="499.46" x2="509.46" y1="235.4883" y2="225.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="282.46" x2="499.46" y1="235.4883" y2="235.4883"/><line style="stroke:#181818;stroke-width:1.0;" x1="499.46" x2="499.46" y1="235.4883" y2="583.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="333.46" y="252.0234">App Service Tier</text></g><!--MD5=[000a823102ee8a4c19dd1dfc24a70275]
cluster App Service\nContainer--><g id="cluster_App Service\nContainer"><rect fill="none" height="103" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="132" x="306.46" y="273.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="83" x="330.96" y="289.0234">App Service</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="70" x="337.46" y="305.5117">Container</text></g><!--MD5=[a96875dd8cb2e433dc952b8d34d153d3]
cluster gw--><g id="cluster_gw"><rect fill="#90EE90" height="103" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="163" x="314.46" y="448.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="102" x="344.96" y="464.0234">m-ld Gateway</text></g><g id="cluster_##15"><path d="M109.6373,643.1355 C114.5113,637.4433 118.7014,637.6556 122.9504,643.8363 C127.232,636.5752 132.7788,635.7552 137.7082,643.1855 C139.7862,635.9512 145.9885,635.8643 150.0259,641.2772 C154.1706,635.0881 158.3015,636.0865 162.5022,641.2154 C165.4341,633.0569 171.067,632.4934 176.2622,639.1071 C180.2091,632.2821 184.5225,632.9498 188.6587,638.9237 C191.9277,632.0809 197.4307,630.9195 201.8478,637.822 C206.0185,632.6043 211.1061,633.1594 213.6387,639.4938 C217.9182,632.8527 223.4984,633.8487 227.2981,640.0058 C230.4384,632.9664 236.4954,633.8563 240.4124,639.182 C245.4967,632.7995 249.4302,634.6994 253.0989,640.6394 C258.2985,635.4828 262.724,636.9818 265.721,643.1042 C270.6347,637.8284 275.3927,636.7443 279.236,644.2372 C283.8465,637.0014 289.8435,637.2315 293.614,645.04 C299.4231,648.4338 299.3519,652.8975 293.5588,656.2341 C302.1436,659.9196 302.8332,664.9368 295.5564,670.7979 C301.0513,675.1358 302.2286,679.6003 295.3074,683.6986 C300.9665,688.5686 298.5238,692.6924 292.9788,695.317 C289.4599,702.0884 285.3197,702.8535 280.2104,696.9147 C276.9555,703.2451 271.8409,704.3699 266.5933,699.2935 C263.4594,704.9689 258.2704,706.3367 253.9362,700.6281 C249.8925,706.4938 245.1595,706.4228 240.6211,701.2234 C236.9065,706.6893 231.4217,706.7389 228.1659,700.7256 C225.2542,707.7441 219.8708,707.6701 215.5983,702.0823 C212.3938,708.7975 205.5857,710.1935 200.9045,703.7286 C196.2557,709.8986 192.6836,708.8788 188.9463,702.8362 C185.275,709.0594 178.8212,709.3634 175.8444,702.1585 C172.5416,707.7742 166.8237,707.3116 163.8937,701.7595 C158.6802,707.1426 154.4058,707.4187 150.3467,700.4894 C145.7644,705.6661 140.8623,706.0474 137.4218,699.2563 C132.6592,705.3595 126.5277,704.7314 123.0988,697.7918 C118.9548,704.3904 112.9268,703.1107 110.1155,696.4835 C103.7368,692.1576 103.3644,686.5146 110.2671,682.3309 C104.5549,679.7467 103.4752,674.4485 108.4443,670.2524 C104.0642,666.2379 103.9285,660.4271 110.4743,658.2625 C102.2313,654.7462 101.8888,647.5367 109.6373,643.1355 " fill="none" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c84cc82a4897bddcf66a62f2bb85723e]
cluster App Database--><g id="cluster_App Database"><path d="M535.46,284.4883 C535.46,274.4883 595.46,274.4883 595.46,274.4883 C595.46,274.4883 655.46,274.4883 655.46,284.4883 L655.46,366.4883 C655.46,376.4883 595.46,376.4883 595.46,376.4883 C595.46,376.4883 535.46,376.4883 535.46,366.4883 L535.46,284.4883 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><path d="M535.46,284.4883 C535.46,294.4883 595.46,294.4883 595.46,294.4883 C595.46,294.4883 655.46,294.4883 655.46,284.4883 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="99" x="545.96" y="310.0234">App Database</text></g><!--MD5=[f92115063e8dc9f632cc320845e472c3]
entity bs--><g id="elem_bs"><path d="M166.96,488.4883 C166.96,478.4883 204.46,478.4883 204.46,478.4883 C204.46,478.4883 241.96,478.4883 241.96,488.4883 L241.96,530.4648 C241.96,540.4648 204.46,540.4648 204.46,540.4648 C204.46,540.4648 166.96,540.4648 166.96,530.4648 L166.96,488.4883 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M166.96,488.4883 C166.96,498.4883 204.46,498.4883 204.46,498.4883 C204.46,498.4883 241.96,498.4883 241.96,488.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="176.96" y="516.0234">Browser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="176.96" y="532.5117">Storage</text></g><!--MD5=[02023e17f29579c18aaa8160cc64e4ce]
entity jsClone--><g id="elem_jsClone"><rect fill="#FFFFE0" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="105.96" y="324.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="115.96" y="348.0234">m-ld clone</text></g><!--MD5=[cede88ca6f48dd4a3458b51c098d950a]
entity form--><g id="elem_form"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="88.46" y="126.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="98.46" y="150.0234">Form Controller</text></g><!--MD5=[4541fb81c80c07473fe4b07432ef0971]
entity app--><g id="elem_app"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="322.46" y="324.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="332.46" y="348.0234">App Service</text></g><!--MD5=[f56f3099e9d7088e3ffbd2ca16089572]
entity gwClone--><g id="elem_gwClone"><rect fill="#FFFFE0" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="357.96" y="491.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="367.96" y="515.0234">m-ld clone</text></g><!--MD5=[de8dbb75c7c3abab9b49df715acaee46]
entity remotes--><g id="elem_remotes"><rect fill="#FFFFE0" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="165" x="117.96" y="650.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="127.96" y="674.5234">m-ld remotes service</text></g><!--MD5=[895070eb9ce9c06a0014a08eba460787]
entity DB_TABLE--><g id="elem_DB_TABLE"><rect fill="#F1F1F1" height="36.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="551.96" y="324.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="561.96" y="348.0234">DB_TABLE</text></g><!--MD5=[107003500c5c42cbbef62457b4e1bbc7]
entity volume--><g id="elem_volume"><path d="M370.46,656.4883 C370.46,646.4883 405.46,646.4883 405.46,646.4883 C405.46,646.4883 440.46,646.4883 440.46,656.4883 L440.46,681.9766 C440.46,691.9766 405.46,691.9766 405.46,691.9766 C405.46,691.9766 370.46,691.9766 370.46,681.9766 L370.46,656.4883 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><path d="M370.46,656.4883 C370.46,666.4883 405.46,666.4883 405.46,666.4883 C405.46,666.4883 440.46,666.4883 440.46,656.4883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="380.46" y="684.0234">volume</text></g><g id="elem_GMN20"><path d="M525.96,481.4883 L525.96,537.4199 A0,0 0 0 0 525.96,537.4199 L668.96,537.4199 A0,0 0 0 0 668.96,537.4199 L668.96,491.4883 L658.96,481.4883 L601.13,481.4883 L595.67,360.5283 L593.13,481.4883 L525.96,481.4883 A0,0 0 0 0 525.96,481.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M658.96,481.4883 L658.96,491.4883 L668.96,491.4883 L658.96,481.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="531.96" y="499.0566">The database is the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="531.96" y="514.3672">source of truth for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="531.96" y="529.6777">the application</text></g><!--MD5=[fecc07e9fb0c8c40468adba4c1167d2f]
link jsClone to bs--><g id="link_jsClone_bs"><path d="M160.21,365.3283 C168.73,392.8983 183.49,440.6483 193.6,473.3583 " fill="none" id="jsClone-bs" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="195.18,478.4783,196.3502,468.6992,193.7066,473.7003,188.7054,471.0567,195.18,478.4783" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="158.73,360.5283,157.5598,370.3074,160.2034,365.3062,165.2046,367.9499,158.73,360.5283" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="178.46" y="406.0566">«optional»</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="189.96" y="421.3672">persist</text></g><!--MD5=[29d8691a05717b6aabe91f7843b0d265]
link form to jsClone--><g id="link_form_jsClone"><path d="M153.46,167.5883 C153.46,205.1883 153.46,281.2083 153.46,319.0383 " fill="none" id="form-jsClone" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="153.46,324.3383,157.46,315.3383,153.46,319.3383,149.46,315.3383,153.46,324.3383" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="153.46,162.5383,149.46,171.5383,153.46,167.5383,157.46,171.5383,153.46,162.5383" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="11" x="154.46" y="206.0566">JS</text></g><!--MD5=[b5d73c6b4d1a65fad6a83a67faa4f254]
link form to app--><g id="link_form_app"><path d="M176.79,166.1583 C192.99,180.5383 215.06,200.1483 234.46,217.4883 C274.98,253.6983 322.02,296.0383 349.4,320.6983 " fill="none" id="form-app" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="353.29,324.2083,349.2953,315.2059,349.5806,320.8556,343.931,321.1409,353.29,324.2083" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="172.8,162.6283,176.8692,171.5972,176.537,165.9501,182.1841,165.6179,172.8,162.6283" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[bc459eb6e89c92b9f8407d6506ef7530]
link app to gw--><g id="link_app_gw"><path d="M364.15,365.5583 C357.56,383.4583 348.35,409.4183 341.46,432.4883 C340.2537,436.5283 339.0611,440.7042 337.8964,444.9239 C337.6053,445.9789 337.3158,447.0365 337.0284,448.0955 " fill="none" id="app-gw" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="337.0284,448.0955,343.2463,440.4576,338.3382,443.2701,335.5257,438.362,337.0284,448.0955" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="365.93,360.7283,359.0623,367.7876,364.1995,365.4193,366.5679,370.5565,365.93,360.7283" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="355.46" y="413.5566">JSON/HTTP/ws</text></g><!--MD5=[20be0b36ad2a09869ee41a81117c6df7]
link app to DB_TABLE--><g id="link_app_DB_TABLE"><path d="M427.6,342.4883 C467.25,342.4883 506.9,342.4883 546.55,342.4883 " fill="none" id="app-DB_TABLE" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="551.89,342.4883,542.89,338.4883,546.89,342.4883,542.89,346.4883,551.89,342.4883" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="422.55,342.4883,431.55,346.4883,427.55,342.4883,431.55,338.4883,422.55,342.4883" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b7b3ace60266d94eedb740e624029364]
link jsClone to remotes--><g id="link_jsClone_remotes"><path d="M114.47,363.1183 C89.1,378.2583 58.11,401.7883 43.46,432.4883 C13.02,496.2683 6,531.5683 43.46,591.4883 C61.08,619.6783 92.4,637.7483 122.46,649.2083 " fill="none" id="jsClone-remotes" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="127.27,650.9883,120.2106,644.1206,122.579,649.2578,117.4418,651.6261,127.27,650.9883" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="118.81,360.5783,109.0227,361.6781,114.4963,363.1065,113.0679,368.5801,118.81,360.5783" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="44.46" y="514.5566">pubsub</text></g><!--MD5=[53b28f2b01454b1ad64b56d8d602b331]
link gwClone to volume--><g id="link_gwClone_volume"><path d="M405.46,533.0083 C405.46,561.5783 405.46,610.7983 405.46,641.2483 " fill="none" id="gwClone-volume" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="405.46,646.3383,409.46,637.3383,405.46,641.3383,401.46,637.3383,405.46,646.3383" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="405.46,527.6483,401.46,536.6483,405.46,532.6483,409.46,536.6483,405.46,527.6483" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="406.46" y="613.0566">persist</text></g><!--MD5=[02f84000029a53bf67aa889dafcdbf73]
link gwClone to remotes--><g id="link_gwClone_remotes"><path d="M395.51,532.3883 C386.56,550.1383 371.98,574.8483 353.46,591.4883 C325.04,617.0183 286.56,636.1983 255.3,648.9783 " fill="none" id="gwClone-remotes" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="250.35,650.9683,260.1928,651.3136,254.9874,649.099,257.202,643.8937,250.35,650.9683" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="397.88,527.5883,390.3256,533.9074,395.6783,532.0774,397.5083,537.4301,397.88,527.5883" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="344.46" y="613.0566">pubsub</text></g><!--MD5=[f2cd73d261657d3350d16fade830b338]
@startuml
'https://plantuml.com/component-diagram
skinparam componentStyle rectangle

title App Service with Database and Sidecar Gateway

node Browser {
  database "Browser\nStorage" as bs
  component page {
    component "m-ld clone" as jsClone #lightyellow
    jsClone <..> bs : <<optional>>\npersist
    component "Form Controller" as form
    form <- -> jsClone : JS
  }
}

node "App Service Tier" {
  component "App Service\nContainer" {
    component [App Service] as app
  }
  component "m-ld Gateway" as gw #lightgreen {
    component "m-ld clone" as gwClone #lightyellow
  }
}

database volume #lightyellow

cloud {
  component "m-ld remotes service" as remotes #lightyellow
}

database "App Database" {
  [DB_TABLE]
}
note bottom
The database is the
source of truth for
the application
end note

form <- -> app
app <- -> gw : JSON/HTTP/ws
app <-> DB_TABLE
jsClone <- -> remotes : pubsub
gwClone <- -> volume : persist
gwClone <- -> remotes : pubsub

@enduml

@startuml
skinparam componentStyle rectangle

title App Service with Database and Sidecar Gateway

node Browser {
  database "Browser\nStorage" as bs
  component page {
    component "m-ld clone" as jsClone #lightyellow
    jsClone <..> bs : <<optional>>\npersist
    component "Form Controller" as form
    form <- -> jsClone : JS
  }
}

node "App Service Tier" {
  component "App Service\nContainer" {
    component [App Service] as app
  }
  component "m-ld Gateway" as gw #lightgreen {
    component "m-ld clone" as gwClone #lightyellow
  }
}

database volume #lightyellow

cloud {
  component "m-ld remotes service" as remotes #lightyellow
}

database "App Database" {
  [DB_TABLE]
}
note bottom
The database is the
source of truth for
the application
end note

form <- -> app
app <- -> gw : JSON/HTTP/ws
app <-> DB_TABLE
jsClone <- -> remotes : pubsub
gwClone <- -> volume : persist
gwClone <- -> remotes : pubsub

@enduml

PlantUML version 1.2022.8(Sun Sep 25 10:00:33 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>