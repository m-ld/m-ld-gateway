<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg"
     contentStyleType="text/css" height="486px" preserveAspectRatio="none"
     style="width:595px;height:486px;background:#FFFFFF;" version="1.1" viewBox="0 0 595 486"
     width="595px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="190" x="203.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="180" x="208.5" y="28.5352">Operation with Webhook</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="103" x2="103" y1="73.9766" y2="479.7031"/><rect fill="#FFFFFF" height="177.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="98" y="103.2871"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="98" y="354.7715"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="514" x2="514" y1="73.9766" y2="479.7031"/><rect fill="#FFFFFF" height="171.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="509" y="267.8398"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="67.5" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="74.5" y="63.0234">Gateway</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="493" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="500" y="63.0234">App</text><polygon fill="#181818" points="86,99.2871,96,103.2871,86,107.2871,90,103.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="5" x2="92" y1="103.2871" y2="103.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="12" y="98.5449">Operation 1</text><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="150" y1="132.5977" y2="132.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="150" y1="132.5977" y2="145.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="109" x2="150" y1="145.5977" y2="145.5977"/><polygon fill="#181818" points="119,141.5977,109,145.5977,119,149.5977,115,145.5977" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="115" y="127.8555">apply Operation 1</text><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="150" y1="174.9082" y2="174.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="150" y1="174.9082" y2="187.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="109" x2="150" y1="187.9082" y2="187.9082"/><polygon fill="#181818" points="119,183.9082,109,187.9082,119,191.9082,115,187.9082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="115" y="170.166">enqueue Update 1</text><path d="M440,200.9082 L440,240.9082 L588,240.9082 L588,210.9082 L578,200.9082 L440,200.9082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M578,200.9082 L578,210.9082 L588,210.9082 L578,200.9082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="446" y="218.4766">Webhook eliminates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="446" y="233.7871">need for polling</text><polygon fill="#181818" points="497,263.8398,507,267.8398,497,271.8398,501,267.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="503" y1="267.8398" y2="267.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="115" y="263.0977">POST /webhook?ETag="1"&amp;Location=~/state?lock [Update 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="519" x2="561" y1="312.4609" y2="312.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="561" x2="561" y1="312.4609" y2="325.4609"/><line style="stroke:#181818;stroke-width:1.0;" x1="520" x2="561" y1="325.4609" y2="325.4609"/><polygon fill="#181818" points="530,321.4609,520,325.4609,530,329.4609,526,325.4609" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="526" y="292.4082">process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="526" y="307.7188">Update 1</text><polygon fill="#181818" points="119,350.7715,109,354.7715,119,358.7715,115,354.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="113" x2="508" y1="354.7715" y2="354.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="125" y="350.0293">DELETE ~/state?lock If-Match: "1"</text><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="150" y1="384.082" y2="384.082"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="150" y1="384.082" y2="397.082"/><line style="stroke:#181818;stroke-width:1.0;" x1="109" x2="150" y1="397.082" y2="397.082"/><polygon fill="#181818" points="119,393.082,109,397.082,119,401.082,115,397.082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="115" y="379.3398">dequeue Update 1</text><polygon fill="#181818" points="497,422.3926,507,426.3926,497,430.3926,501,426.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="108" x2="503" y1="426.3926" y2="426.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="115" y="421.6504">200 OK</text><path d="M79.75,439.3926 L79.75,464.3926 L536.75,464.3926 L536.75,449.3926 L526.75,439.3926 L79.75,439.3926 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M526.75,439.3926 L526.75,449.3926 L536.75,449.3926 L526.75,439.3926 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="198.5" y="456.9609">ETag: "1" may now be superseded</text><!--MD5=[0955acee145bd6fde9b604d579828615]
@startuml
'https://plantuml.com/sequence-diagram
!pragma teoz true
hide footbox

title: Operation with Webhook

participant Gateway as gw
participant "App" as app

-> gw ++: Operation 1
gw -> gw: apply Operation 1
gw -> gw: enqueue Update 1
note over app
Webhook eliminates
need for polling
end note
gw -> app ++- -: POST /webhook?ETag="1"&Location=\~/state?lock [Update 1]
app -> app: process\nUpdate 1
app -> gw ++: DELETE \~/state?lock If-Match: "1"
gw -> gw: dequeue Update 1
return 200 OK
deactivate app
note across: ETag: "1" may now be superseded

@enduml

@startuml
!pragma teoz true
hide footbox

title: Operation with Webhook

participant Gateway as gw
participant "App" as app

-> gw ++: Operation 1
gw -> gw: apply Operation 1
gw -> gw: enqueue Update 1
note over app
Webhook eliminates
need for polling
end note
gw -> app ++- -: POST /webhook?ETag="1"&Location=\~/state?lock [Update 1]
app -> app: process\nUpdate 1
app -> gw ++: DELETE \~/state?lock If-Match: "1"
gw -> gw: dequeue Update 1
return 200 OK
deactivate app
note across: ETag: "1" may now be superseded

@enduml

PlantUML version 1.2022.8(Sun Sep 25 10:00:33 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>