<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg"
     contentStyleType="text/css" height="471px" preserveAspectRatio="none"
     style="width:491px;height:471px;background:#FFFFFF;" version="1.1" viewBox="0 0 491 471"
     width="491px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.4883" id="_title" style="stroke:none;stroke-width:1.0;" width="190" x="152.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="180" x="157.5" y="28.5352">Operation with Webhook</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="103" x2="103" y1="73.9766" y2="464.3926"/><rect fill="#FFFFFF" height="177.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="98" y="103.2871"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="98" y="339.4609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="363" x2="363" y1="73.9766" y2="464.3926"/><rect fill="#FFFFFF" height="156.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="358" y="267.8398"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="67.5" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="74.5" y="63.0234">Gateway</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="342" y="42.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="349" y="63.0234">App</text><polygon fill="#181818" points="86,99.2871,96,103.2871,86,107.2871,90,103.2871" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="5" x2="92" y1="103.2871" y2="103.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="12" y="98.5449">Operation 1</text><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="150" y1="132.5977" y2="132.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="150" y1="132.5977" y2="145.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="109" x2="150" y1="145.5977" y2="145.5977"/><polygon fill="#181818" points="119,141.5977,109,145.5977,119,149.5977,115,145.5977" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="115" y="127.8555">apply Operation 1</text><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="150" y1="174.9082" y2="174.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="150" y1="174.9082" y2="187.9082"/><line style="stroke:#181818;stroke-width:1.0;" x1="109" x2="150" y1="187.9082" y2="187.9082"/><polygon fill="#181818" points="119,183.9082,109,187.9082,119,191.9082,115,187.9082" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="115" y="170.166">enqueue Update 1</text><path d="M289,200.9082 L289,240.9082 L437,240.9082 L437,210.9082 L427,200.9082 L289,200.9082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M427,200.9082 L427,210.9082 L437,210.9082 L427,200.9082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="295" y="218.4766">Webhook eliminates</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="295" y="233.7871">need for polling</text><polygon fill="#181818" points="346,263.8398,356,267.8398,346,271.8398,350,267.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="352" y1="267.8398" y2="267.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="115" y="263.0977">POST /webhook?ETag="1" [Update 1]</text><line style="stroke:#181818;stroke-width:1.0;" x1="368" x2="410" y1="297.1504" y2="297.1504"/><line style="stroke:#181818;stroke-width:1.0;" x1="410" x2="410" y1="297.1504" y2="310.1504"/><line style="stroke:#181818;stroke-width:1.0;" x1="369" x2="410" y1="310.1504" y2="310.1504"/><polygon fill="#181818" points="379,306.1504,369,310.1504,379,314.1504,375,310.1504" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="375" y="292.4082">process Update 1</text><polygon fill="#181818" points="119,335.4609,109,339.4609,119,343.4609,115,339.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="113" x2="357" y1="339.4609" y2="339.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="125" y="334.7188">DELETE ~/state/lock If-Match: "1"</text><line style="stroke:#181818;stroke-width:1.0;" x1="108" x2="150" y1="368.7715" y2="368.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="150" x2="150" y1="368.7715" y2="381.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="109" x2="150" y1="381.7715" y2="381.7715"/><polygon fill="#181818" points="119,377.7715,109,381.7715,119,385.7715,115,381.7715" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="115" y="364.0293">dequeue Update 1</text><polygon fill="#181818" points="346,407.082,356,411.082,346,415.082,350,411.082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="108" x2="352" y1="411.082" y2="411.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="115" y="406.3398">200 OK</text><path d="M79.75,424.082 L79.75,449.082 L385.75,449.082 L385.75,434.082 L375.75,424.082 L79.75,424.082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M375.75,424.082 L375.75,434.082 L385.75,434.082 L375.75,424.082 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="123" y="441.6504">ETag: "1" may now be superseded</text><!--MD5=[3787ecbd6df291e1f455682c27e20943]
@startuml
'https://plantuml.com/sequence-diagram
!pragma teoz true
hide footbox

title: Operation with Webhook

participant Gateway as gw
participant "App" as app

-> gw ++: Operation 1
gw -> gw: apply Operation 1
gw -> gw: enqueue Update 1
note over app
Webhook eliminates
need for polling
end note
gw -> app ++- -: POST /webhook?ETag="1" [Update 1]
app -> app: process Update 1
app -> gw ++: DELETE \~/state/lock If-Match: "1"
gw -> gw: dequeue Update 1
return 200 OK
deactivate app
note across: ETag: "1" may now be superseded

@enduml

@startuml
!pragma teoz true
hide footbox

title: Operation with Webhook

participant Gateway as gw
participant "App" as app

-> gw ++: Operation 1
gw -> gw: apply Operation 1
gw -> gw: enqueue Update 1
note over app
Webhook eliminates
need for polling
end note
gw -> app ++- -: POST /webhook?ETag="1" [Update 1]
app -> app: process Update 1
app -> gw ++: DELETE \~/state/lock If-Match: "1"
gw -> gw: dequeue Update 1
return 200 OK
deactivate app
note across: ETag: "1" may now be superseded

@enduml

PlantUML version 1.2022.8(Sun Sep 25 10:00:33 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>