<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="513px" preserveAspectRatio="none" style="width:874px;height:513px;background:#FFFFFF;" version="1.1" viewBox="0 0 874 513" width="874px" zoomAndPan="magnify"><defs/><g><!--MD5=[114274d28d17c5df55f7fe5a44697fdc]
cluster User End-Point--><g id="cluster_User End-Point"><path d="M304.5,6 L415.5,6 A3.75,3.75 0 0 1 418,8.5 L425,28.4883 L864.5,28.4883 A2.5,2.5 0 0 1 867,30.9883 L867,503.5 A2.5,2.5 0 0 1 864.5,506 L304.5,506 A2.5,2.5 0 0 1 302,503.5 L302,8.5 A2.5,2.5 0 0 1 304.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="302" x2="425" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110" x="306" y="21.5352">User End-Point</text></g><g id="elem_changeDetails"><ellipse cx="473.8794" cy="74.7759" fill="#F1F1F1" rx="154.3794" ry="33.2759" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="113" x="417.3794" y="70.2007">change details</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="238" x="354.8794" y="86.8999">PATCH /user/:user {emails, keyids}</text></g><g id="elem_GMN8"><path d="M695,62.5 L695,71 L628.55,75 L695,79 L695,87.8105 A0,0 0 0 0 695,87.8105 L847,87.8105 A0,0 0 0 0 847,87.8105 L847,72.5 L837,62.5 L695,62.5 A0,0 0 0 0 695,62.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M837,62.5 L837,72.5 L847,72.5 L837,62.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="701" y="80.0684">including revoke key</text></g><g id="elem_getActivation"><ellipse cx="474.035" cy="456.107" fill="#90EE90" rx="156.035" ry="33.607" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="107" x="420.535" y="451.5318">get activation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="242" x="353.035" y="468.231">POST /user/:user/activation {email}</text></g><g id="elem_GMN13"><path d="M696.5,443.5 L696.5,452 L630.28,456 L696.5,460 L696.5,468.8105 A0,0 0 0 0 696.5,468.8105 L845.5,468.8105 A0,0 0 0 0 845.5,468.8105 L845.5,453.5 L835.5,443.5 L696.5,443.5 A0,0 0 0 0 696.5,443.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M835.5,443.5 L835.5,453.5 L845.5,453.5 L835.5,443.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="702.5" y="461.0684">sends code by email</text></g><g id="elem_mintUserKey"><ellipse cx="474.1371" cy="260.1507" fill="#90EE90" rx="116.1371" ry="27.1507" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="107" x="420.6371" y="255.5755">mint user key</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="400.1371" y="272.2748">POST /user/:user/key</text></g><g id="elem_GMN18"><path d="M691,201.5 L691,228.19 L576.11,246.98 L691,236.19 L691,242.1211 A0,0 0 0 0 691,242.1211 L851,242.1211 A0,0 0 0 0 851,242.1211 L851,211.5 L841,201.5 L691,201.5 A0,0 0 0 0 691,201.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M841,201.5 L841,211.5 L851,211.5 L841,201.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="697" y="219.0684">must use activation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="697" y="234.3789">for self-service create</text></g><g id="elem_GMN21"><path d="M699,277.5 L699,284.83 L576.11,273.02 L699,292.83 L699,318.1211 A0,0 0 0 0 699,318.1211 L843,318.1211 A0,0 0 0 0 843,318.1211 L843,287.5 L833,277.5 L699,277.5 A0,0 0 0 0 699,277.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M833,277.5 L833,287.5 L843,287.5 L833,277.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="705" y="295.0684">create user account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="705" y="310.3789">if not exists</text></g><g id="elem_deleteUser"><ellipse cx="474.1457" cy="171.1507" fill="#F1F1F1" rx="87.1457" ry="27.1507" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="87" x="430.6457" y="166.5755">delete user</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="420.6457" y="183.2748">DEL /user/:user</text></g><g id="elem_getPublicKey"><ellipse cx="474.1854" cy="355.0371" fill="#F1F1F1" rx="150.6854" ry="32.5371" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="110" x="419.1854" y="350.4619">get public key</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="229" x="359.6854" y="367.1611">GET /user/:user/publicKey/:keyid</text></g><!--MD5=[8fc3522a43f8c7199df5e09e5bb0188e]
entity user--><g id="elem_user"><ellipse cx="21" cy="230.5" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M21,238.5 L21,265.5 M8,246.5 L34,246.5 M21,265.5 L8,280.5 M21,265.5 L34,280.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="6" y="295.5352">user</text></g><!--MD5=[eab4eb7d0ef44c19c3b4c8ba4c3c2b5b]
entity root--><g id="elem_root"><ellipse cx="160.5" cy="177.5" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M160.5,185.5 L160.5,212.5 M147.5,193.5 L173.5,193.5 M160.5,212.5 L147.5,227.5 M160.5,212.5 L173.5,227.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="146" y="242.5352">root</text></g><!--MD5=[8ff070b7d5e1a986f05c16843ab1fd88]
reverse link user to root--><g id="link_user_root"><path d="M55.25,247.18 C84.33,235.97 125.1,220.26 145.99,212.21 " fill="none" id="user-backto-root" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="57.38,253.87,36.2,254.53,52.34,240.8,57.38,253.87" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="67" y="232.5684">is a</text></g><!--MD5=[0ce6d84f1cfc79b8f43984097fde2b8c]
link user to changeDetails--><g id="link_user_changeDetails"><path d="M32.83,221.73 C46.12,183.3 72.92,126.87 120,106 C181.41,78.78 254.64,69.14 318.45,67.03 " fill="none" id="user-to-changeDetails" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="323.81,66.87,314.6994,63.1287,318.812,67.0128,314.9279,71.1254,323.81,66.87" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="149" y="78.5684">self</text></g><!--MD5=[6d45ff613d8cf0fb0fc7e946784d8aef]
link user to getActivation--><g id="link_user_getActivation"><path d="M36.07,284.11 C43.87,296.13 54.34,310.34 66,321 C86.59,339.82 94.44,341.81 120,353 C197.38,386.88 289.08,413.26 359.62,430.83 " fill="none" id="user-to-getActivation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="364.67,432.08,356.8921,426.0381,359.8159,430.8808,354.9733,433.8046,364.67,432.08" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b4f84038614d8bd7d92fddaed316da1c]
link user to mintUserKey--><g id="link_user_mintUserKey"><path d="M36.21,266.63 C54.93,274.96 89.1,288.79 120,294 C211.01,309.34 316.47,295.06 388.26,280.58 " fill="none" id="user-to-mintUserKey" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="393.37,279.54,383.7519,277.4204,388.471,280.5398,385.3516,285.2589,393.37,279.54" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="121" y="275.5684">self; can use</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="129.5" y="290.8789">activation</text></g><!--MD5=[bc3926108d026f38c113ec4070dce8bd]
link root to mintUserKey--><g id="link_root_mintUserKey"><path d="M175,210.69 C188.95,214.42 211.38,220.15 231,224 C275.26,232.69 324.44,240.36 366.84,246.37 " fill="none" id="root-to-mintUserKey" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="371.97,247.09,363.6177,241.8709,367.0191,246.3909,362.4991,249.7923,371.97,247.09" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="232" y="220.5684">any user</text></g><!--MD5=[24d7976be1639b9cb633520b70a775b1]
link user to deleteUser--><g id="link_user_deleteUser"><path d="M36.1,234.46 C52.38,207.94 81.88,167.98 120,151 C213.36,109.42 334.61,130.39 407.97,150.13 " fill="none" id="user-to-deleteUser" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="413.17,151.55,405.5365,145.3267,408.3455,150.2368,403.4354,153.0459,413.17,151.55" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="149" y="127.5684">self</text></g><!--MD5=[0cfac5e684e8b6f853af175d3c4c0a69]
link root to deleteUser--><g id="link_root_deleteUser"><path d="M175.29,205.41 C211.68,201.2 312.63,189.53 386.93,180.95 " fill="none" id="root-to-deleteUser" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="392.23,180.33,382.8321,177.3839,387.2627,180.901,383.7456,185.3316,392.23,180.33" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="232" y="190.5684">any user</text></g><!--MD5=[821b45fb826899e9187418fdc2880d4c]
link user to getPublicKey--><g id="link_user_getPublicKey"><path d="M36.16,273.55 C54.03,289.63 86.51,315.58 120,326 C183.11,345.63 255.45,353.89 318.14,356.86 " fill="none" id="user-to-getPublicKey" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="323.41,357.1,314.6026,352.692,318.4152,356.871,314.2363,360.6836,323.41,357.1" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="149" y="322.5684">self</text></g><!--MD5=[29c3eacb4a37d3ae0510de219520cd72]
link root to getPublicKey--><g id="link_root_getPublicKey"><path d="M175.02,217.25 C188.97,227.81 211.41,244.68 231,259 C258.78,279.31 263,289.07 294,304 C315.74,314.47 340.03,323.18 363.54,330.25 " fill="none" id="root-to-getPublicKey" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="368.54,331.74,361.0426,325.3533,363.745,330.323,358.7754,333.0253,368.54,331.74" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="232" y="255.5684">any user</text></g><!--MD5=[a2ed1a568a527b81574b6fa4961b6a04]
@startuml
'https://plantuml.com/use-case-diagram
left to right direction

:user:
:root:
user <|- - root : is a

package "User End-Point" {
  usecase changeDetails as "=== change details
  PATCH /user/:user {emails, keyids}"
  user - -> (changeDetails) : self
  note right: including revoke key

  usecase getActivation #lightgreen as "=== get activation
  POST /user/:user/activation {email}"
  user - -> (getActivation)
  note right: sends code by email

  usecase mintUserKey #lightgreen as "=== mint user key
  POST /user/:user/key"
  user - -> mintUserKey : self; can use\nactivation
  note right of mintUserKey: must use activation\nfor self-service create
  note right of mintUserKey: create user account\nif not exists
  root - -> mintUserKey : any user

  usecase deleteUser as "=== delete user
  DEL /user/:user"
  user - -> deleteUser : self
  root - -> deleteUser : any user

  usecase getPublicKey as "=== get public key
  GET /user/:user/publicKey/:keyid"
  user - -> getPublicKey : self
  root - -> getPublicKey : any user
}

@enduml

@startuml
left to right direction

:user:
:root:
user <|- - root : is a

package "User End-Point" {
  usecase changeDetails as "=== change details
  PATCH /user/:user {emails, keyids}"
  user - -> (changeDetails) : self
  note right: including revoke key

  usecase getActivation #lightgreen as "=== get activation
  POST /user/:user/activation {email}"
  user - -> (getActivation)
  note right: sends code by email

  usecase mintUserKey #lightgreen as "=== mint user key
  POST /user/:user/key"
  user - -> mintUserKey : self; can use\nactivation
  note right of mintUserKey: must use activation\nfor self-service create
  note right of mintUserKey: create user account\nif not exists
  root - -> mintUserKey : any user

  usecase deleteUser as "=== delete user
  DEL /user/:user"
  user - -> deleteUser : self
  root - -> deleteUser : any user

  usecase getPublicKey as "=== get public key
  GET /user/:user/publicKey/:keyid"
  user - -> getPublicKey : self
  root - -> getPublicKey : any user
}

@enduml

PlantUML version 1.2022.8(Sun Sep 25 10:00:33 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>