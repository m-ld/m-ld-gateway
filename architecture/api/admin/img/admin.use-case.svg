<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="435px" preserveAspectRatio="none" style="width:806px;height:435px;background:#FFFFFF;" version="1.1" viewBox="0 0 806 435" width="806px" zoomAndPan="magnify"><defs/><g><!--MD5=[114274d28d17c5df55f7fe5a44697fdc]
cluster User End-Point--><g id="cluster_User End-Point"><path d="M304.5,6 L415.5,6 A3.75,3.75 0 0 1 418,8.5 L425,28.4883 L796.5,28.4883 A2.5,2.5 0 0 1 799,30.9883 L799,425.5 A2.5,2.5 0 0 1 796.5,428 L304.5,428 A2.5,2.5 0 0 1 302,425.5 L302,8.5 A2.5,2.5 0 0 1 304.5,6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="302" x2="425" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="110" x="306" y="21.5352">User End-Point</text></g><g id="elem_change details"><ellipse cx="398.1429" cy="118.8286" fill="#F1F1F1" rx="72.1429" ry="16.8286" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="347.9529" y="122.3054">change details</text></g><g id="elem_GMN8"><path d="M540,69.5 L540,94.8105 A0,0 0 0 0 540,94.8105 L567.51,94.8105 L460.19,110.33 L575.51,94.8105 L782,94.8105 A0,0 0 0 0 782,94.8105 L782,79.5 L772,69.5 L540,69.5 A0,0 0 0 0 540,69.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M772,69.5 L772,79.5 L782,79.5 L772,69.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="546" y="87.0684">PATCH /user/:user {emails, keyids}</text></g><g id="elem_GMN11"><path d="M322,41.5 L322,66.8105 A0,0 0 0 0 322,66.8105 L394,66.8105 L398,101.99 L402,66.8105 L474,66.8105 A0,0 0 0 0 474,66.8105 L474,51.5 L464,41.5 L322,41.5 A0,0 0 0 0 322,41.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M464,41.5 L464,51.5 L474,51.5 L464,41.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="328" y="59.0684">including revoke key</text></g><g id="elem_get activation"><ellipse cx="397.9425" cy="329.7885" fill="#90EE90" rx="69.4425" ry="16.2885" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="349.8398" y="333.61">get activation</text></g><g id="elem_GMN16"><path d="M586.5,325.5 L586.5,331.74 L467.23,332.09 L586.5,339.74 L586.5,350.8105 A0,0 0 0 0 586.5,350.8105 L735.5,350.8105 A0,0 0 0 0 735.5,350.8105 L735.5,335.5 L725.5,325.5 L586.5,325.5 A0,0 0 0 0 586.5,325.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M725.5,325.5 L725.5,335.5 L735.5,335.5 L725.5,325.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="592.5" y="343.0684">sends code by email</text></g><g id="elem_GMN19"><path d="M539,265.5 L539,290.8105 A0,0 0 0 0 539,290.8105 L593.14,290.8105 L451.82,319.48 L601.14,290.8105 L783,290.8105 A0,0 0 0 0 783,290.8105 L783,275.5 L773,265.5 L539,265.5 A0,0 0 0 0 539,265.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M773,265.5 L773,275.5 L783,275.5 L773,265.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="545" y="283.0684">POST /user/:user/activation {email}</text></g><g id="elem_get user key"><ellipse cx="398.183" cy="187.1366" fill="#90EE90" rx="66.183" ry="15.6366" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="353.683" y="191.1542">get user key</text></g><g id="elem_GMN24"><path d="M318,237.5 L318,278.1211 A0,0 0 0 0 318,278.1211 L478,278.1211 A0,0 0 0 0 478,278.1211 L478,247.5 L468,237.5 L402,237.5 L398,202.77 L394,237.5 L318,237.5 A0,0 0 0 0 318,237.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M468,237.5 L468,247.5 L478,247.5 L468,237.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="324" y="255.0684">must use activation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="324" y="270.3789">for self-service create</text></g><g id="elem_GMN27"><path d="M589,189.5 L589,199.7 L460.19,192.39 L589,207.7 L589,230.1211 A0,0 0 0 0 589,230.1211 L733,230.1211 A0,0 0 0 0 733,230.1211 L733,199.5 L723,189.5 L589,189.5 A0,0 0 0 0 589,189.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M723,189.5 L723,199.5 L733,199.5 L723,189.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="595" y="207.0684">create user account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="595" y="222.3789">if not exists</text></g><g id="elem_GMN30"><path d="M582,129.5 L582,154.8105 A0,0 0 0 0 582,154.8105 L583.48,154.8105 L451.82,177.89 L591.48,154.8105 L740,154.8105 A0,0 0 0 0 740,154.8105 L740,139.5 L730,129.5 L582,129.5 A0,0 0 0 0 582,129.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M730,129.5 L730,139.5 L740,139.5 L730,129.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="588" y="147.0684">POST /user/:user/key</text></g><g id="elem_delete user"><ellipse cx="397.7687" cy="397.1537" fill="#F1F1F1" rx="63.7687" ry="15.1537" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="356.7687" y="401.1713">delete user</text></g><g id="elem_GMN37"><path d="M600.5,385.5 L600.5,393.77 L462.18,397.24 L600.5,401.77 L600.5,410.8105 A0,0 0 0 0 600.5,410.8105 L721.5,410.8105 A0,0 0 0 0 721.5,410.8105 L721.5,395.5 L711.5,385.5 L600.5,385.5 A0,0 0 0 0 600.5,385.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M711.5,385.5 L711.5,395.5 L721.5,395.5 L711.5,385.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="606.5" y="403.0684">DEL /user/:user</text></g><!--MD5=[8fc3522a43f8c7199df5e09e5bb0188e]
entity user--><g id="elem_user"><ellipse cx="21" cy="220.5" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M21,228.5 L21,255.5 M8,236.5 L34,236.5 M21,255.5 L8,270.5 M21,255.5 L34,270.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="6" y="285.5352">user</text></g><!--MD5=[eab4eb7d0ef44c19c3b4c8ba4c3c2b5b]
entity root--><g id="elem_root"><ellipse cx="160.5" cy="220.5" fill="#F1F1F1" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M160.5,228.5 L160.5,255.5 M147.5,236.5 L173.5,236.5 M160.5,255.5 L147.5,270.5 M160.5,255.5 L173.5,270.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="146" y="285.5352">root</text></g><!--MD5=[8ff070b7d5e1a986f05c16843ab1fd88]
reverse link user to root--><g id="link_user_root"><path d="M56.53,250 C85.52,250 125.41,250 145.99,250 " fill="none" id="user-backto-root" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="56.2,257,36.2,250,56.2,243,56.2,257" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="67" y="246.5684">is a</text></g><!--MD5=[722a9aede05dd7d2bf67bbb37c8d1163]
link user to change details--><g id="link_user_change details"><path d="M36.23,223.58 C52.42,196.71 81.67,156.86 120,141 C185.66,113.82 267.47,110.64 325.11,112.83 " fill="none" id="user-to-change details" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="330.26,113.05,321.4271,108.6935,325.264,112.8502,321.1073,116.6871,330.26,113.05" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="149" y="116.5684">self</text></g><!--MD5=[a7789b36d431fa9680f962050bef2010]
link user to get activation--><g id="link_user_get activation"><path d="M36.12,260.26 C54.46,273.03 87.94,294.43 120,305 C186.66,326.98 266.93,332.06 323.86,332.34 " fill="none" id="user-to-get activation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="328.95,332.35,319.95,328.35,323.95,332.35,319.95,336.35,328.95,332.35" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4de52e652fbd80b46890bad88a937d65]
link user to get user key--><g id="link_user_get user key"><path d="M36.24,238.8 C54.46,225.23 87.54,203.06 120,194 C190.95,174.2 276.13,175.58 333.13,179.89 " fill="none" id="user-to-get user key" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="338.21,180.29,329.5587,175.5831,333.226,179.8901,328.9189,183.5574,338.21,180.29" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="121" y="162.5684">self; can use</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="129.5" y="177.8789">activation</text></g><!--MD5=[07eb85929d55c4855944589c1806d026]
link root to get user key--><g id="link_root_get user key"><path d="M175.18,246.34 C208.34,237.47 294.3,214.47 348.96,199.85 " fill="none" id="root-to-get user key" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="353.82,198.55,344.0938,197.0004,348.9884,199.8365,346.1523,204.7311,353.82,198.55" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="232" y="215.5684">any user</text></g><!--MD5=[e836c631b5f4a1440268b2a16e72ec84]
link user to delete user--><g id="link_user_delete user"><path d="M36.14,271.15 C53.06,294.55 83.71,331.28 120,349 C186.2,381.33 270.64,392.22 328.79,395.72 " fill="none" id="user-to-delete user" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="333.98,396.01,325.2236,391.5016,328.9882,395.7239,324.7659,399.4885,333.98,396.01" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="149" y="345.5684">self</text></g><!--MD5=[c00fc3cfefeaffe3d5181513acb6c5ee]
link root to delete user--><g id="link_root_delete user"><path d="M175.12,265.12 C197.63,289.26 245.01,336.58 294,364 C310.25,373.1 329.37,380.1 346.69,385.26 " fill="none" id="root-to-delete user" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="351.53,386.67,344.01,380.31,346.73,385.27,341.77,387.99,351.53,386.67" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="232" y="316.5684">any user</text></g><!--MD5=[2081175920fdf6a9f90fd6d72710e2a1]
@startuml
'https://plantuml.com/use-case-diagram
left to right direction

:user:
:root:
user <|- - root : is a

package "User End-Point" {
  user - -> (change details) : self
  note right: PATCH /user/:user {emails, keyids}
  note bottom of "change details": including revoke key
  (get activation) #lightgreen
  user - -> (get activation)
  note right of "get activation": sends code by email
  note right of "get activation": POST /user/:user/activation {email}
  (get user key) #lightgreen
  user - -> (get user key) : self; can use\nactivation
  note top of "get user key": must use activation\nfor self-service create
  note right of "get user key": create user account\nif not exists
  note right of "get user key": POST /user/:user/key
  root - -> (get user key) : any user
  user - -> (delete user) : self
  root - -> (delete user) : any user
  note right: DEL /user/:user
}

@enduml

@startuml
left to right direction

:user:
:root:
user <|- - root : is a

package "User End-Point" {
  user - -> (change details) : self
  note right: PATCH /user/:user {emails, keyids}
  note bottom of "change details": including revoke key
  (get activation) #lightgreen
  user - -> (get activation)
  note right of "get activation": sends code by email
  note right of "get activation": POST /user/:user/activation {email}
  (get user key) #lightgreen
  user - -> (get user key) : self; can use\nactivation
  note top of "get user key": must use activation\nfor self-service create
  note right of "get user key": create user account\nif not exists
  note right of "get user key": POST /user/:user/key
  root - -> (get user key) : any user
  user - -> (delete user) : self
  root - -> (delete user) : any user
  note right: DEL /user/:user
}

@enduml

PlantUML version 1.2022.8(Sun Sep 25 10:00:33 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>